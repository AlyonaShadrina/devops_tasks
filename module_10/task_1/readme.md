# <a name="_yhm3s5a4hcfn"></a>Task
You, as a key developer, received a task to investigate infrastructure as code (IaC) tools for a new project within account. It's going to be a complex project with a microservice backed by a database and caching layer. It also will have a static website which will provide a rich user interface for customers all around the world. AWS cloud is used to host all projects resources. After investigation, you should propose IaC tools that you will use to manage all project's infrastructure as well as automate delivery processes.

In scope of this task you need to:

1. Investigate how you will manage local environment with [Docker Compose](https://docs.docker.com/compose/). Check the content of [docker-compose.yml](https://github.com/EPAM-JS-Competency-center/devops-fundamentals-course/blob/main/tasks/module_10/task_1/docker-compose.yml) and consider of how you can apply it to meet the requirements. Study the [yaml file reference](https://yaml.org/spec/1.2.2/) to strengthen/discover YAML features if needed.
1. Investigate build and automation tools ([CodeBuild](https://docs.aws.amazon.com/codebuild/index.html), [GitLab CI](https://docs.gitlab.com/ee/ci/)). Check [build-docker-image.buildspec.yml](https://github.com/EPAM-JS-Competency-center/devops-fundamentals-course/blob/main/tasks/module_10/task_1/build-docker-image.buildspec.yml), [buildspec.yml](https://github.com/EPAM-JS-Competency-center/devops-fundamentals-course/blob/main/tasks/module_10/task_1/buildspec.yml), [.gitlab-ci.yml](https://github.com/EPAM-JS-Competency-center/devops-fundamentals-course/blob/main/tasks/module_10/task_1/.gitlab-ci.yml) and think about how you can apply it to automate quality checks in upcoming project as well as applications' build and deployment processes. Investigate the [buildspec](https://docs.aws.amazon.com/codebuild/latest/userguide/build-spec-ref.html) and the [.gitlab-ci.yml](https://docs.gitlab.com/ee/ci/yaml/gitlab_ci_yaml.html) files references and compare their capabilities and ease of use. Define pros and cons list for each tool. Are there any alternatives or complimentary tools that can be used instead/with these tools?
1. Investigate infrastructure management (IaC) tools: [CloudFormation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html), [AWS CDK](https://docs.aws.amazon.com/cdk/v2/guide/getting_started.html), and [Terraform](https://developer.hashicorp.com/terraform/tutorials?product_intent=terraform). Check and compare the [cloud-formation.yaml](https://github.com/EPAM-JS-Competency-center/devops-fundamentals-course/blob/main/tasks/module_10/task_1/cloud-formation.yaml) template, [AWS CDK](https://github.com/EPAM-JS-Competency-center/devops-fundamentals-course/blob/main/tasks/module_10/task_1/cdk-app-sample) and [terraform](https://github.com/EPAM-JS-Competency-center/devops-fundamentals-course/blob/main/tasks/module_10/task_1/terraform-app-sample/examples/complete) sample projects. What are the benefits you will get and challenges you can face if you use these tools? Are there any alternatives to these tools? Which one you'd prefer for the project?
1. Create a comparison table (or define in your mind) for each group of tools and define the following characteristics: language and tools, easy of use, clear to understand, costs, community and support, maturity of the tool, issues that can appear, etc.
1. Define which tools you'd propose for the project.
# <a name="_ys544v4w0y4o"></a>Solution
## <a name="_usvs72vx8a23"></a>Build and automation tools

||AWS CodeBuild|Gitlab CI|Jenkins|CircleCI|
| :- | :- | :- | :- | :- |
|language and tools|<p>Yaml config.</p><p>Provides preconfigured environments for supported versions of Java, Ruby, Python, Go, Node. js, Android, . NET Core, PHP, and Docker. Supports parallel and coordinated executions.</p><p></p>|<p>Yaml config.</p><p>The Docker Container Registry is integrated into GitLab by default.</p><p>Although not built into GitLab CI by default, the Docker support allows solving any language-specific need that may arise. Supports Parallel and distributed Execution</p>|<p>Yaml config.</p><p>Has many configurable plugins which help at meeting all requirements. Supports Parallel and distributed Execution</p>|<p>Yaml config.</p><p>It offers automated parallelism to speed up the deployment of multiple executions. Built-in assistance for Docker in the workflow</p>|
|easy of use|Medium: requires integration with other AWS tools for full and convenient CI/CD management|Easy: all in one CI/CD solution that is easy to configure|Easy (but might require configuring additional plugins)|Easy: SaaS solution. With a cloud server provides better scalability and less maintenance|
|clear to understand|Medium: requires looking through several services to get the whole picture|Clear: has centralized interface with pipelines and logs. Will show performance metrics for all the deployed apps.|Poor UI, but mostly sufficient|Clear: simple interface|
|costs|Has free-tier for a year. Pay per time.|Has free-tier.  From 29$/month|Free.|Has free-tier. From 15$/month|
|community and support|?|Big community. All GitLab plans except the free version have a next business day support system. |Big community, but Documentation itself isn’t always sufficient|CircleCI provides premium support for customers who need it, and for others, it provides email-support. For free tier users, community support is available.|
|maturity of the tool|Mature |Mature |Mature and extensible |Mature |
|issues that can appear|There is an opinion that it is not suited for building too custom deployment pipelines. Costs might not be predictable.|?|<p>Since most plugins are developed by open-source contributors, they are not consistently supported. Nor are they tested together, which may lead to conflicts.</p><p>Complex plugin integration.</p><p>Lack of analytics for overall tracking of pipelines.</p>|Limited with features of SaaS platform|
### <a name="_2k5ikpl9z017"></a>Summary
If the project is only using AWS and plan to stay only with AWS, we can go with CodeBuild + additional AWS CI/CD tooling: it would be easier to configure and there would be no need to expose AWS credentials to 3-part service. If there is a strategy to avoid vendor-lock, I would suggest to have a look at GitlabCI or Jenkins.

## <a name="_sxoxke2yy885"></a>Infrastructure management (IaC) tools

||AWS CloudFormation|AWS CDK|Terraform|Ansible |
| :- | :- | :- | :- | :- |
|language and tools|<p>.json, .yaml, .template, .txt;  is infrastructure provisioning tool; is declarative;</p><p>offers Rollback Triggers that allow you to restore infrastructure to a previous state, guaranteeing controlled deployments in case of any mistakes or issues;  handles parallelization and sequencing for you</p>|<p>TypeScript, JavaScript, Python, Java, C# or Go;</p><p>is infrastructure provisioning tool;</p><p>has CDK Toolkit (CLI);  provides a more structured reuse format than CloudFormation;  is more testable than CloudFormatio</p>|<p>HCL (Hashicorp Configuration Language), which is based on Golang;</p><p>is infrastructure provisioning tool; is immutable; is declarative;</p><p></p>|YAML; is a configuration management tool to install and configure the applications on existing infrastructures; is mutable; is imperative|
|easy of use|There is the AWS CloudFormation designer if you prefer to design visually.|<p>It is intended for moderately to highly experienced AWS users.</p><p>Experience with popular AWS services, particularly [AWS IAM Identity Center ](https://docs.aws.amazon.com/singlesignon/latest/userguide/)and [AWS CloudFormation](https://aws.amazon.com/cloudformation/) is required. </p><p>Proficiency in the programming language you intend to use with the AWS CDK is required.</p>|is easily readable and uses modules to easily configure your code and call your resources. |easy to get started|
|clear to understand|is well-documented|has shallow learning curve|has features to validate your code, run a ‘plan’ so you know exactly what elements are going to change before they change, and traceability of what was deployed|Has good documentation|
|costs|Free tier: 1,000 handler operations per month. charge per handler operation create, update, delete, read, or list actions.|There is no additional charge for AWS CDK. AWS resources are paid|Free, with paid managed offering|Free. Red Hat offers Automation Platform  Subscriptionstarting from $5,000/year|
|community and support|It's been around for years and you can find a wealth of sample code online.|?|?|Lack of enterprise support and community feel for troubleshooting|
|maturity of the tool|Mature|Mature|Mature|Mature|
|issues that can appear|<p>The lack of type checking means you won't catch some obvious errors until runtime.</p><p>AWS resources created during template instantiation are billed regardless of whether the stack creation process was completed successfully.</p>|?|?|Lack of state meaning it doesn’t track dependencies. It will execute tasks sequentially, stopping when the task finishes, fails or encounters an error.   |
### <a name="_o67pkxm7qamr"></a>Summary
If the project is only using AWS and plan to stay only with AWS, we can go with CloudFormation: it should cover the needs of our particular microservice, and in case we will need something more extensible, we can move to AWS SDK. If there is a strategy to avoid vendor-lock, I would suggest to have a look at Terraform, as it might simplify further migration to other platform.
